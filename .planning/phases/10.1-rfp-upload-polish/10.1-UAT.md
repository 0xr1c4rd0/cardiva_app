---
status: testing
phase: 10.1-rfp-upload-polish
source: [10.1-01-SUMMARY.md, 10.1-02-SUMMARY.md, 10.1-03-SUMMARY.md, 10.1-04-SUMMARY.md, 10.1-05-SUMMARY.md]
started: 2026-01-24T14:00:00Z
updated: 2026-01-24T14:00:00Z
---

## Current Test

number: 1
name: Match Review Table Sorting
expected: |
  Navigate to /rfps/{id}/matches for any completed RFP. Click a column header (e.g., "Descricao" or "Codigo SPMS"). The table should re-sort by that column and show a loading indicator briefly. URL updates with sort parameters.
awaiting: user response

## Pre-requisite Check

**⚠️ MIGRATIONS REQUIRED BEFORE TESTING**

The following migrations must be run in Supabase Dashboard → SQL Editor before tests will pass:

1. `supabase/migrations/20260124_multi_user_rfp_access.sql` - Adds last_edited_by column
2. `supabase/migrations/20260124_add_confirmed_at.sql` - Adds confirmed_at column

## Tests

### 1. Match Review Table Sorting
expected: Navigate to /rfps/{id}/matches for any completed RFP. Click a column header to sort. Table should re-sort and data should refresh (not just URL change). Loading indicator appears during transition.
result: [pending]

### 2. KPI Chips Display 3 States
expected: Navigate to /rfps. Three KPI chips appear at the top: "Por Rever" (amber), "Revistos" (blue), "Confirmados" (green). Each shows a count.
result: [pending]

### 3. Por Rever Count Accuracy
expected: "Por Rever" count shows RFPs with pending items that have suggestions requiring human decision (not 100% auto-matched). Verify by checking an RFP that has pending items.
result: [pending]

### 4. Confirm Button Appears
expected: Navigate to /rfps/{id}/matches for any completed RFP. A "Confirmar" button appears in the header between the stats chips and export button.
result: [pending]

### 5. Confirm Button Updates State
expected: Click the "Confirmar" button. A success toast appears ("Concurso confirmado"). Button changes to "Confirmado" (disabled, green styling). The "Confirmados" KPI count increments by 1.
result: [pending]

### 6. Multi-File Selection in Dialog
expected: Click "Carregar Concurso" to open upload dialog. Drag or select multiple PDF files (2-3). The dialog shows count of selected files (e.g., "3 ficheiros selecionados").
result: [pending]

### 7. Queue Files and Close Dialog
expected: With multiple files selected, click Upload. Dialog closes immediately (doesn't wait for completion). Files appear in the processing card with individual progress bars.
result: [pending]

### 8. Stacked Progress Bars
expected: Upload 3+ files. Processing card shows up to 3 progress bars stacked vertically, each with filename, percentage, and time elapsed. Additional files show in collapsible overflow section.
result: [pending]

### 9. Upload Button Never Disabled
expected: While files are processing, the "Carregar Concurso" button remains enabled. You can click it and add more files to the queue.
result: [pending]

### 10. Multi-User Visibility
expected: Log in as a different user (or use incognito). All RFPs are visible in the list (not just those uploaded by current user).
result: [pending]

### 11. Multi-User Edit Access
expected: As a different user, navigate to any RFP's match review page. Accept or reject a match suggestion. The action should succeed without permission errors.
result: [pending]

### 12. Uploader Display on RFP List
expected: Navigate to /rfps. Each RFP job shows the uploader's name (formatted from email) after the timestamp, e.g., "ha 2 horas - Joao Silva".
result: [pending]

### 13. Editor Display on RFP List
expected: After editing an RFP as a different user, the list shows "Editado por X" where X is the editor's name (formatted from email).
result: [pending]

### 14. Inventory Table Styling
expected: Navigate to /inventory. Table styling matches /rfps/{id}/matches page: inline sort buttons with small icons, consistent hover states, similar visual appearance.
result: [pending]

## Summary

total: 14
passed: 0
issues: 0
pending: 14
skipped: 0

## Gaps

[none yet]
