# Plan 10-02: Loading States & Empty States

## Overview
Add skeleton loading states and improved empty states with illustrations and CTAs for the RFPs page.

## Wave
Wave 2 - Polish

## Tasks

### Task 1: Create RFPListSkeleton component
**File**: `src/app/(dashboard)/rfps/components/rfp-list-skeleton.tsx`

- 5 skeleton rows matching job card structure
- Pulsing gray placeholders for: icon, filename, file size, date, status badge, action buttons
- Use Tailwind `animate-pulse` class
- Match the exact layout of RFPJobsList items

```tsx
export function RFPListSkeleton() {
  return (
    <Card>
      <CardHeader>
        <div className="h-6 w-48 bg-muted animate-pulse rounded" />
        <div className="h-4 w-64 bg-muted animate-pulse rounded mt-2" />
      </CardHeader>
      <CardContent>
        <div className="flex flex-col gap-2">
          {[...Array(5)].map((_, i) => (
            <SkeletonRow key={i} />
          ))}
        </div>
      </CardContent>
    </Card>
  )
}
```

### Task 2: Update RFPJobsList empty state
**File**: `src/app/(dashboard)/rfps/components/rfp-jobs-list.tsx`

- Replace current empty state with improved version
- Add simple SVG illustration (document icon with upload arrow)
- Improve messaging:
  - Title: "Ainda não há concursos"
  - Description: "Carregue um documento de concurso PDF para começar a correspondência com o inventário."
- Add CTA button: "Carregar primeiro concurso"
- Button should trigger the upload dialog (use context or callback)

### Task 3: Add loading.tsx for RFPs page
**File**: `src/app/(dashboard)/rfps/loading.tsx`

- Server-side loading state using RFPListSkeleton
- Shows while page.tsx is fetching data
- Include header skeleton (title + description + button)
- Include toolbar skeleton (search + sort)

```tsx
import { RFPListSkeleton } from './components/rfp-list-skeleton'

export default function Loading() {
  return (
    <div className="flex flex-1 flex-col gap-6">
      {/* Header skeleton */}
      <div className="flex items-center justify-between">
        <div>
          <div className="h-8 w-64 bg-muted animate-pulse rounded" />
          <div className="h-4 w-96 bg-muted animate-pulse rounded mt-2" />
        </div>
        <div className="h-10 w-32 bg-muted animate-pulse rounded" />
      </div>

      <RFPListSkeleton />
    </div>
  )
}
```

### Task 4: Add search empty state
**File**: `src/app/(dashboard)/rfps/components/rfp-jobs-list.tsx`

- Add conditional rendering for search empty state
- When search returns no results and search term is not empty:
  - Show message: "Nenhum concurso encontrado"
  - Show search term: "Nenhum resultado para '[search term]'"
  - Add suggestion: "Tente outro termo de pesquisa"
  - Add "Limpar pesquisa" button that clears the search

```tsx
// In RFPJobsList, differentiate between:
// 1. No jobs at all → Show empty state with CTA
// 2. No jobs matching search → Show search empty state
if (jobs.length === 0) {
  if (search) {
    return <SearchEmptyState search={search} onClear={onClearSearch} />
  }
  return <EmptyState onUpload={onUploadClick} />
}
```

## Verification
1. Hard refresh `/rfps` → Skeleton loading state shows briefly
2. Search for non-existent term → "Nenhum concurso encontrado" message
3. Click "Limpar pesquisa" → Returns to full list
4. View page with no jobs → Empty state with illustration and CTA
5. Click "Carregar primeiro concurso" → Upload dialog opens

## Design Specifications

### Skeleton Colors
- Background: `bg-muted` (gray-100)
- Animation: `animate-pulse`
- Border radius: `rounded` or `rounded-lg`

### Empty State Style
- Icon/illustration: Large, muted color (gray-400)
- Title: `text-lg font-medium`
- Description: `text-sm text-muted-foreground`
- CTA: Primary button style

### Search Empty State Style
- Icon: Search or FileQuestion
- Title: "Nenhum concurso encontrado"
- Search term display: `font-medium` within text
- Clear button: Ghost variant
